<script>
// === タイトルでタップ/クリック開始 ===
const gameCanvas = document.getElementById('game');

// iOSの「タップ→prompt許可」対策で、click と touchend を両方拾います
function handleTapToStart(e){
  // 画面スクロール等を防止
  if (e.cancelable) e.preventDefault();
  // タイトル中のみ起動
  if (state.mode === 'title') startNameEntry();
}

['click','touchend'].forEach(ev=>{
  gameCanvas.addEventListener(ev, handleTapToStart, {passive:false});
});

// 画面のどこをタップしても開始したい場合（ボタン類は除外）
document.addEventListener('click', (e)=>{
  if (state.mode !== 'title') return;
  const t = e.target;
  // 上部ボタンやコントローラのタップは無視しておく
  if (t.closest('.toolbar') || t.closest('.controls')) return;
  startNameEntry();
}, {passive:true});
</script>
