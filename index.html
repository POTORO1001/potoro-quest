<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>ポ・トロクエスト（戦闘中の装備/道具戻りFix）</title>
<style>
  :root{ --ui:#101522; --fg:#eef2ff; --acc:#ff7ad6; --pad:12px; }
  *{ box-sizing:border-box; -webkit-user-select:none; user-select:none; touch-action:manipulation; }
  html,body{ height:100%; margin:0; background:#0b0f18; color:var(--fg); font-family:ui-sans-serif,system-ui,"Hiragino Kaku Gothic ProN",Meiryo,sans-serif; }
  .app{ min-height:100%; display:flex; flex-direction:column; gap:8px; padding:env(safe-area-inset-top) var(--pad) calc(110px + env(safe-area-inset-bottom)) var(--pad); }
  .topbar{ display:flex; align-items:center; gap:8px; }
  .title{ font-weight:800; color:var(--acc); white-space:normal; line-height:1.1; }
  .toolbar{ margin-left:auto; display:flex; gap:8px; justify-content:flex-end; align-items:center; }
  .btn{ background:#1a2238; color:#e8ecff; border:1px solid #34406a; border-radius:10px; padding:8px 12px; font-weight:700; }
  .btn:active{ transform:translateY(1px); }
  .screen{ display:flex; justify-content:center; }
  canvas{ image-rendering:pixelated; width:100%; max-width:100vw; height:auto; background:#000; border-radius:12px; outline:1px solid #2b3246; }

  .controls{ position:fixed; left:0; right:0; bottom:0; z-index:1000; padding:8px env(safe-area-inset-right) calc(10px + env(safe-area-inset-bottom)) env(safe-area-inset-left);
    display:flex; align-items:flex-end; justify-content:space-between; gap:10px; background:linear-gradient(180deg, rgba(11,15,24,0), rgba(11,15,24,.78)); }
  .dpad{ display:grid; grid-template-columns:56px 56px 56px; grid-template-rows:56px 56px 56px; gap:6px; flex:0 0 auto; }
  .dpad .sp{ visibility:hidden; }
  .btnc{ width:56px; height:56px; border-radius:12px; border:1px solid #34406a; background:#111729; color:#e8ecff; font-weight:900; font-size:16px; display:flex; align-items:center; justify-content:center; }
  .btnc:active{ transform:scale(0.98); background:#0d1220; }
  .actions{ display:flex; flex-direction:column; gap:8px; align-items:stretch; min-width:220px; }
  .actions-row{ display:flex; gap:8px; justify-content:space-between; }
  .btnL{ flex:1 1 0; height:56px; border-radius:12px; border:1px solid #34406a; background:#17213a; color:#e8ecff; font-weight:800; }
  .btnL:active{ transform:scale(0.98); background:#121a2e; }
  @media (max-width:360px){ .btnc{ width:50px; height:50px; } .dpad{ grid-template-columns:50px 50px 50px; grid-template-rows:50px 50px 50px; gap:6px; } .btnL{ height:50px; font-size:14px; } .actions{ min-width:190px; } }
  @media (min-width:560px){ .btnc{ width:64px; height:64px; } .dpad{ grid-template-columns:64px 64px 64px; grid-template-rows:64px 64px 64px; } .btnL{ height:64px; } }

  /* 説明モーダル */
  .help-mask{ position:fixed; inset:0; z-index:1500; display:none; background:rgba(0,0,0,.55); }
  .help-wrap{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:min(680px, calc(100vw - 24px)); height:min(520px, calc(100vh - 180px));
    background:rgba(16,21,34,.98); border:1px solid #2b3246; border-radius:12px; display:flex; flex-direction:column; overflow:hidden; }
  .help-head{ padding:10px 12px; border-bottom:1px solid #2b3246; font-weight:800; }
  .help-body{ flex:1 1 auto; overflow:auto; padding:12px; line-height:1.45; -webkit-overflow-scrolling:touch; }
  .help-body p{ margin:0 0 .6em; white-space:pre-wrap; font-size:14px; }
  .help-foot{ padding:10px 12px; border-top:1px solid #2b3246; display:flex; gap:8px; justify-content:flex-end; }
  .help-close{ background:#17213a; color:#e8ecff; border:1px solid #34406a; border-radius:10px; padding:8px 12px; font-weight:700; }
</style>
</head>
<body>
<div class="app">
  <div class="topbar">
    <!-- ご要望の2行タイトル -->
    <div class="title">ポ・トロ<br>クエ
